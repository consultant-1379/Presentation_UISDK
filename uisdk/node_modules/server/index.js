var express = require('express');

var app = express();

var server = {

    start: function (port, dir) {
        app.configure(function () {
            app.set('port', port);
            app.use(express.logger('dev'));
            app.use(express.bodyParser());
            app.use(app.router);
            app.use(express.static(dir));
        });

        app.configure('development', function () {
            app.use(express.errorHandler());
        });

        app.listen(app.get('port'), function () {
            console.log("Titan Server listening on port " + app.get('port'));
        });
    }

};

['post', 'get', 'put', 'delete'].forEach(function (verb) {
    server[verb] = function () {
        return app[verb].apply(app, arguments);
    };
});

module.exports = server;