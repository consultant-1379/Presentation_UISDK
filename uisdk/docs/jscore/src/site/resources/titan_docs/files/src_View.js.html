<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\View.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/_private.html">_private</a></li>
            
                <li><a href="..&#x2F;classes/Backbone.History.html">Backbone.History</a></li>
            
                <li><a href="..&#x2F;classes/Titan.html">Titan</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Application.html">Titan.Application</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Collection.html">Titan.Collection</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Element.html">Titan.Element</a></li>
            
                <li><a href="..&#x2F;classes/Titan.EventBus.html">Titan.EventBus</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Int.html">Titan.Int</a></li>
            
                <li><a href="..&#x2F;classes/Titan.MainController.html">Titan.MainController</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Model.html">Titan.Model</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Place.html">Titan.Place</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Presenter.html">Titan.Presenter</a></li>
            
                <li><a href="..&#x2F;classes/Titan.Router.html">Titan.Router</a></li>
            
                <li><a href="..&#x2F;classes/Titan.utils.html">Titan.utils</a></li>
            
                <li><a href="..&#x2F;classes/Titan.View.html">Titan.View</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Titan.html">Titan</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\View.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * @class _private
 *&#x2F;

&#x2F;**
 * Gets the jQuery Element for the root of the view
 *
 * @private
 * @method View_getRoot
 * @return {jQuery} The jQuery Element for the root of the view
 *&#x2F;
_private.View_getRoot = View_getRoot;
function View_getRoot() {
    return this.__view__.$el;
}

&#x2F;**
 * Checks that the element&#x27;s data-name is unique, checks for data-widget and loads the specified widget if exists.
 * Checks for data-type and groups elements of the same type together.
 *
 * @private
 * @method View_parseByNames
 * @param index {Number} The index of the element (needed as method is used as callback for $.each)
 * @param element {HTMLElement} The element to be processed
 *&#x2F;
&#x2F;&#x2F;noinspection JSUnusedLocalSymbols
_private.View_parseByNames = View_parseByNames;
function View_parseByNames(index, element) {
    var $current = $(element),
        name = $current.data(&#x27;name&#x27;),
        path,
        type;
    if (this[name]) {
        throw new Error(&#x27;Attribute &#x60;&#x27; + name + &#x27;&#x60; exists&#x27;);
    }
    $current.removeAttr(&#x27;data-name&#x27;);

    path = $current.data(&#x27;widget&#x27;);
    if (path) {
        require([path], function (Widget) {
            var widget,
                widgetRoot,
                prop;

            widget = Titan.create(Widget, this);

            widgetRoot = View_getRoot.call(widget.view || widget);

            prop = $current.data(&#x27;bind&#x27;);

            if (prop) {
                widget._bindableProperty = prop;
                this._bindable.push(widget);
            }
            $current.replaceWith(widgetRoot);
            this[name] = widget;
        }.bind(this));
    } else {
        type = $current.data(&#x27;type&#x27;);

        this[name] = new Titan.Element($current, {
            name: type || name,
            parent: this
        });
        if (type !== undefined) {
            if (!this[type]) {
                this[type] = [];
            }
            this[type].push(this[name]);
        }
    }
}

&#x2F;**
 * @class Titan
 *&#x2F;

&#x2F;**
 * Loops through all bindable widgets and binds changes in a specified model to their equivalent property.
 * Use the data-bind attribute in your template to bind the corresponding property in the model.
 *
 * @method uiBinding
 * @param view {Titan.View} The View that contains the bindable widgets
 * @param model {Titan.Model} The Model to be bound to the View
 *&#x2F;
Titan.uiBinding = function (view, model) {

    &#x2F;&#x2F;TODO: Remove setTimeout need fix requirejs widget loading
    window.setTimeout(function () {
        _.each(view._bindable, function (widget) {
            var prop = widget._bindableProperty;
            model.on(&#x27;change:&#x27; + prop, function (model, value) {
                if (value != widget.getValue()) {
                    widget.setValue(value);
                }
            });
            widget.on(&#x27;change:value&#x27;, function (value) {
                model.set(prop, value);
            });
        });
    }, 200);
};


&#x2F;**
 * Generates HTML markup based on a provided Model.
 *
 * @class Titan.View
 * @constructor
 * @param options {Object} Contains properties that are added to the View&#x27;s options object.
 *                         Applies special options (model, collection, eventBus) directly to the View.
 *&#x2F;
var View = Titan.View = function (parent, options) {
    var node,
        root,
        metaName,
        metaNamespace,
        app;

    Utils_configure.call(this, options || {}, [&#x27;model&#x27;, &#x27;collection&#x27;]);

    this._bindable = [];
    this._children = [];
    this._parent = parent;
    this.__view__ = new Backbone.View();


    app = Utils_getApplication.call(this) || {
        dictionary: {},
        namespace: &quot;default&quot;
    };


    this.dictionary = app.dictionary;
    this.namespace = app.namespace;


    this.render();

    root = View_getRoot.call(this);
    metaName = root.data(&#x27;name&#x27;);

    if (this.styles) {
        if (this.constructor.prototype.$styles === undefined) {
            node = $.parseHTML(&#x27;&lt;style&gt;&#x27;);
            this.constructor.prototype.$styles = $(node).html(this.styles).appendTo(&#x27;head&#x27;);
        }
    }

    if (metaName) {
        this.name = metaName;
        this.root = new Titan.Element(root, {
            parent: this
        });
        root.removeAttr(&#x27;data-name&#x27;);
        root.removeAttr(&#x27;data-namespace&#x27;);
    }

    this.__view__.$(&#x27;[data-name]&#x27;).each(View_parseByNames.bind(this));


    this.init(app);

};
&#x2F;**
 * Provides access to Backbone.View.extend via Utils_extend
 * See: [http:&#x2F;&#x2F;backbonejs.org&#x2F;#View-extend](http:&#x2F;&#x2F;backbonejs.org&#x2F;#View-extend)
 *
 * @method extend
 *&#x2F;
View.extend = Utils_extend;

&#x2F;&#x2F;noinspection JSUnusedLocalSymbols
View.prototype = {

    &#x2F;**
     * Generates HTML markup based on a template and model
     *
     * @method template
     * @param context of view to be applied to the template
     * @return {String} The markup generated by the template
     *&#x2F;
    template: function (context) {
        return &#x27;&lt;div&gt;&lt;&#x2F;div&gt;&#x27;;
    },

    &#x2F;**
     * Triggered when rendering the View. Checks if it the View is already rendered. If it is, it will remove all
     * events from the View, re-render it, and apply events back to it, otherwise it will render it normally.
     *
     * @method render
     * @return {View} This View is returned to allow for chained methods.
     *&#x2F;
    render: function () {
        if (this.isRendered) {
            var node = $.parseHTML(this.template(this));
            View_getRoot.call(this).replaceWith(node);
            this.__view__.setElement(node);
        } else {
            this.__view__.setElement(this.template(this));
            this.isRendered = true;
        }

        return this;
    },

    &#x2F;**
     * Method called after the View is initialised. Empty by default, it can be overridden to provide functionality
     *
     * @method init
     *&#x2F;
    init: function () {

    },

    &#x2F;**
     * Removes the View from the DOM.
     *
     * @method stop
     *&#x2F;
    stop: function () {
        View_getRoot.call(this).remove();
    }

};


&#x2F;**
 * Gets the parent of the View.
 *
 * @method parent
 * @return {*} The parent of the View
 *&#x2F;

&#x2F;**
 * Adds a child to the View.
 *
 * @method addChild
 * @param widget {*} The child to be added to the View
 *&#x2F;
_.extend(View.prototype, HasChildren, Backbone.Events);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
